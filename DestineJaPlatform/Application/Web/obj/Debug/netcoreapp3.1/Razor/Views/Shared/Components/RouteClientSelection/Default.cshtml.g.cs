#pragma checksum "C:\repositorios\DestineJaPlatform\Application\Web\Views\Shared\Components\RouteClientSelection\Default.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "743e0ee649b72d2f716ec7315f395b8f960d65a7"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Shared_Components_RouteClientSelection_Default), @"mvc.1.0.view", @"/Views/Shared/Components/RouteClientSelection/Default.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "C:\repositorios\DestineJaPlatform\Application\Web\Views\_ViewImports.cshtml"
using Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\repositorios\DestineJaPlatform\Application\Web\Views\_ViewImports.cshtml"
using Web.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\repositorios\DestineJaPlatform\Application\Web\Views\_ViewImports.cshtml"
using Web.Utils;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\repositorios\DestineJaPlatform\Application\Web\Views\_ViewImports.cshtml"
using DTO.Utils;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\repositorios\DestineJaPlatform\Application\Web\Views\_ViewImports.cshtml"
using DTO.Shared;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"743e0ee649b72d2f716ec7315f395b8f960d65a7", @"/Views/Shared/Components/RouteClientSelection/Default.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"b42406f827f578580248b07848ae56f582b2639c", @"/Views/_ViewImports.cshtml")]
    public class Views_Shared_Components_RouteClientSelection_Default : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    {
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_0 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("type", new global::Microsoft.AspNetCore.Html.HtmlString("text/javascript"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_1 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("asp-cut-key", "route-client-selection", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        #line hidden
        #pragma warning disable 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        #pragma warning restore 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::Web.Utils.TagHelperScriptCut __Web_Utils_TagHelperScriptCut;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            WriteLiteral(@"
<style type=""text/css"">
    #route-client-add-table tr:not(.group-start) td:last-child {
        text-align: center;
    }

/*    #route-client-add-table_wrapper .dataTables_scrollHead, #route-client-add-table_wrapper .dataTables_scrollHeadInner,
    #route-client-address-add-table_wrapper .dataTables_scrollHead, #route-client-address-add-table_wrapper .dataTables_scrollHeadInner {
        min-width: 910px;
    }*/

    ");
            WriteLiteral(@"@media (min-width: 992px) {
        #route-client-modal .modal-lg, .modal-xl {
            max-width: 1000px;
        }
    }
</style>
<div class=""row"" id=""route-client-modal-inputs-set-city"">
    <div class=""col-md"">
        <div class=""input-group mb-3"">
            ");
#nullable restore
#line 23 "C:\repositorios\DestineJaPlatform\Application\Web\Views\Shared\Components\RouteClientSelection\Default.cshtml"
       Write(Html.DropDownList("State", dropDownListHelper.GetStates(""), "Estado", new { Class = "form-control w-100", onchange = "updateCitySelect()", style = "max-width: 160px;" }));

#line default
#line hidden
#nullable disable
            WriteLiteral("\n            <select name=\"City\" class=\"form-control required\">\n                <option");
            BeginWriteAttribute("value", " value=\"", 1062, "\"", 1070, 0);
            EndWriteAttribute();
            WriteLiteral(">Cidade</option>\n");
#nullable restore
#line 26 "C:\repositorios\DestineJaPlatform\Application\Web\Views\Shared\Components\RouteClientSelection\Default.cshtml"
                  
                    await foreach (var item in routeServices.GetContractAndServiceAvailbleCities())
                    {

#line default
#line hidden
#nullable disable
            WriteLiteral("                        <option data-state=\"");
#nullable restore
#line 29 "C:\repositorios\DestineJaPlatform\Application\Web\Views\Shared\Components\RouteClientSelection\Default.cshtml"
                                       Write(item.State);

#line default
#line hidden
#nullable disable
            WriteLiteral("\"");
            BeginWriteAttribute("value", " value=\"", 1285, "\"", 1303, 1);
#nullable restore
#line 29 "C:\repositorios\DestineJaPlatform\Application\Web\Views\Shared\Components\RouteClientSelection\Default.cshtml"
WriteAttributeValue("", 1293, item.City, 1293, 10, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(">");
#nullable restore
#line 29 "C:\repositorios\DestineJaPlatform\Application\Web\Views\Shared\Components\RouteClientSelection\Default.cshtml"
                                                                       Write(item.City);

#line default
#line hidden
#nullable disable
            WriteLiteral("</option>\n");
#nullable restore
#line 30 "C:\repositorios\DestineJaPlatform\Application\Web\Views\Shared\Components\RouteClientSelection\Default.cshtml"
                    }
                

#line default
#line hidden
#nullable disable
            WriteLiteral(@"            </select>
            <div class=""input-group-append"">
                <button type=""button"" class=""btn btn-primary"" onclick=""AddAddressToTable()"" style=""display: flex; height: 40px;""><i class=""simple-icon-plus""></i><span class=""d-none d-md-block"">&nbsp;Adicionar Cidade</span></button>
            </div>
        </div>
    </div>
</div>
<div class=""row mt-3"">
    <div class=""col-12 table-responsive"">
        <table class=""table table-bordered table-condensed"" id=""route-client-address-add-table"" style=""max-height: 250px;"">
            <thead>
                <tr style=""background: #a1a1a1; color: white;"">
                    <th>Estado</th>
                    <th>Cidade</th>
                    <th></th>
                </tr>
            </thead>
        </table>
    </div>
</div>
<hr />
<div class=""row"" id=""route-client-modal-inputs-get-clients"">
    <div class=""col-12"">
        <div class=""input-group mb-3"">
            <select name=""ClientType"" class=""form-control"">
                <option");
            BeginWriteAttribute("value", " value=\"", 2384, "\"", 2392, 0);
            EndWriteAttribute();
            WriteLiteral(@">Todos Geradores</option>
                <option value=""1"">Geradores com Contrato</option>
                <option value=""2"">Geradores com Serviço</option>
            </select>
            <div class=""input-group-append"">
                <button type=""button"" class=""btn btn-primary"" onclick=""getClientsByAddress()"" style=""display: flex; height: 40px;""><i class=""simple-icon-plus""></i><span class=""d-none d-md-block"">&nbsp;Carregar Geradores</span></button>
            </div>
        </div>
    </div>
    <div class=""col-12 form-group"">
        <input class=""form-control"" data-toggle=""search-datatable"" data-target=""#route-client-add-table"" placeholder=""Pesquisar..."" />
    </div>
    <div class=""col-12 form-group table-responsive"">
        <table class=""table table-bordered table-condensed"" id=""route-client-add-table"">
            <thead>
                <tr style=""background: #a1a1a1; color: white;"">
                    <th class=""text-center""><input type=""checkbox"" id=""select-all-clients-checkbox"" onclick=""se");
            WriteLiteral("lectAllClientsCheckbox(this)\" /></th>\n                    <th>Código</th>\n                    <th>Gerador</th>\n                    <th>Cidade</th>\n                    <th>Bairro</th>\n");
            WriteLiteral(@"                    <th>Contrato?</th>
                    <th>Situação</th>
                    <th>Está em Outra Rota?</th>
                </tr>
            </thead>
        </table>
    </div>
</div>
<div class=""row mt-3"">
    <div class=""col"">
        <hr />
");
            WriteLiteral("        <button type=\"button\" class=\"btn btn-success float-right\" onclick=\"selectAddresses()\">Carregar Geradores Selecionados na Rota</button>\n    </div>\n</div>\n\n\n");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("script", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "743e0ee649b72d2f716ec7315f395b8f960d65a710422", async() => {
                WriteLiteral(@"
    var routeClientTable, routeClientAddressAddTable, routeClientAddTable;
    //var collapsed_groups = {};

    $(document).ready(function () {
        routeClientAddressAddTable = $('#route-client-address-add-table').DataTable({
            serverSide: false,
            proccessing: true,
            searching: true,
            lengthChange: false,
            dom: 'tip',
            scrollY: '200px',
            scrollCollapse: true,
            paging: false,
            ""bInfo"": false
        });

        routeClientAddTable = $('#route-client-add-table').DataTable({
            proccessing: true,
            serverSide: false,
            searching: true,
            lengthChange: false,
            dom: 'tip',
            ""paging"": true,
            ""info"": false,
            scrollY: '400px',
            scrollCollapse: true,
            paging: false,
            'language': {
                ""sEmptyTable"": ""Nenhum registro encontrado (Tente adicionar outros Estados/Cidades na tabela acima)""
     ");
                WriteLiteral(@"       },
            ""columnDefs"": [{ orderable: false, targets: [0] }],
            //columnDefs: [
            //    { ""visible"": false, ""targets"": 1 },
            //],
            //rowGroup: {
            //    dataSrc: 1,
            //    startRender: function (rows, group) {
            //        //var count = $('[data-company-name=""' + group + '""]').length;
            //        if (collapsed_groups[group] == null) collapsed_groups[group] = true;

            //        var collapsed = !!collapsed_groups[group];

            //        rows.nodes().each(function (r) {
            //            r.style.display = collapsed ? 'none' : '';
            //        });

            //        var icon = collapsed ? 'iconsminds-folder' : 'iconsminds-folder-open';
            //        return $('<tr/>', { class: 'group-start'})
            //            .append('<td colspan=""8"" style=""cursor:pointer;""><i class=""fas ' + icon + '"" data-folder-group=""' + group + '""></i>&nbsp;<b>' + group + '</b></td>')
            ");
                WriteLiteral(@"//            .attr('data-name', group)
            //            .toggleClass('collapsed', collapsed);
            //    }
            //},
            drawCallback: function () {
                $('#select-all-clients-checkbox')[0].checked = false;

                _setSelectedClientAsUnselectable();

                //função agrupar e expandir items da lista de endereços
                //$('#route-client-add-table tbody').unbind();
                //$('#route-client-add-table tbody').on('click', 'tr.group-start', function () {
                //    var name = $(this).data('name');
                //    collapsed_groups[name] = !collapsed_groups[name];
                //    routeClientAddTable.draw(false);
                //});
            }
        });

        updateCitySelect();

        routeClientAddTable.columns.adjust();
    });

    function updateCitySelect() {
        $('#route-client-modal [name=""City""]').val('');

        var state = $('#route-client-modal [name=""State""]').val();

        $('#r");
                WriteLiteral(@"oute-client-modal [name=""City""] option').hide();

        $('#route-client-modal [name=""City""] option').each(function (i, e) {
            if ($(e).data('state') == state) $(e).show();
        });
        $('#route-client-modal [name=""City""] option[value=""""]').show();
    }

    function AddAddressToTable() {
        var state = $('#route-client-modal [name=""State""]').val();
        var city = $('#route-client-modal [name=""City""]').val();

        if (!validateInputs('route-client-modal-inputs-set-city') || $('[data-state=""' + state + '""][data-city=""' + city + '""]').length > 0) return;

        var r = routeClientAddressAddTable.row.add({
            0: state,
            1: city,
            2: '<div class=""text-center""><a href=""javascript:removeAddress(\'' + state + '\', \'' + city + '\')"" class=""badge badge-danger badge-pill""><i class=""fa fa-trash-o""></i> Remover</a></div>'
        });

        $(r.node()).attr('data-state', state);
        $(r.node()).attr('data-city', city);

        routeClientAddressAd");
                WriteLiteral(@"dTable.draw();
    }

    function removeAddress(state, city) {
        var row = routeClientAddressAddTable.row($('[data-state=""' + state + '""][data-city=""' + city + '""]'));
        row.remove();

        routeClientAddressAddTable.draw();
    }

    function getClientsByAddress() {
        if (!validateInputs('route-client-modal-inputs-get-clients')) return;

        //collapsed_groups = {}; //Limpa os dados de expasão da tabela
        var p = [];

        $('[data-state][data-city]').each(function (i, e) {
            p.push({ name: 'Address.Index', value: i });
            p.push({ name: 'Address[' + i + '].State', value: $(e).data('state') });
            p.push({ name: 'Address[' + i + '].City', value: $(e).data('city') });
        });

        p.push({ name: 'ClientType', value: $('#route-client-modal [name=""ClientType""]').val() });
        p.push({ name: 'ActiveClient', value: true });


        $.post('");
#nullable restore
#line 224 "C:\repositorios\DestineJaPlatform\Application\Web\Views\Shared\Components\RouteClientSelection\Default.cshtml"
           Write(Url.Action("GetClientsByAddress", "Route"));

#line default
#line hidden
#nullable disable
                WriteLiteral(@"', p, function (d) {
            routeClientAddTable.rows().remove();

            $.each(d, function (i, e) {
                var r = routeClientAddTable.row.add({
                    0: '<div class=""text-center""><input type=""checkbox"" data-company-name=""' + e.companyName + '"" data-address-id=""' + e.clientCollectionAddressId + '"" /></div>',
                    1: e.clientId,
                    2: e.companyName ,
                    3: e.city,
                    4: e.neighborhood,
                    5: e.isContract ? '<span class=""badge badge-pill badge-success"">Sim</span>' : '<span class=""badge badge-pill badge-danger"">Não</span>',
                    6: isNull(e.contractSituationName, '-'),
                    //7: e.address + ', ' + e.number,
                    7: e.inOtherRoute == true ? '<span class=""badge badge-pill badge-danger"">Sim</span>' : '<span class=""badge badge-pill badge-success"">Não</span>'
                });

                $(r.node()).css('background-color', e.rowColor);
            })");
                WriteLiteral(@";

            routeClientAddTable.draw();
            $('#route-client-add-table').DataTable().columns.adjust();

            if (typeof _setSelectedClientAsUnselectable == 'function') _setSelectedClientAsUnselectable();//desabilita os checkbox selecionados
        });
    }

    function selectAddresses() {
        if (typeof setAddressInRoute != 'function') return;

        var p = [];
        $.each($('#route-client-add-table input[type=""checkbox""]:checked'), function (i, e) {
            if ($(e).attr('disabled') == 'disabled') return;

            p.push({ name: 'ClientCollectionAddressIds.Index', value: i });
            p.push({ name: 'ClientCollectionAddressIds[' + i + ']', value: $(e).data('address-id') });
        });

        setAddressInRoute(p);

        if (typeof _setSelectedClientAsUnselectable == 'function') _setSelectedClientAsUnselectable();//desabilita os checkbox selecionados
    }

    function setSelectedClientAsUnselectable(addressIds)
    {
        //$.each($('#route-client-add-table");
                WriteLiteral(@" input[type=""checkbox""]'), function (i, e) { e.checked = false; $(e).removeAttr('disabled'); });

        if (addressIds.length == 0) return;

        $.each(addressIds, function (i, e) {
            try {
                $('#route-client-add-table input[type=""checkbox""][data-address-id=""' + e.addressId + '""]').attr('disabled', 'disabled');
                $('#route-client-add-table input[type=""checkbox""][data-address-id=""' + e.addressId + '""]')[0].checked = true;
            } catch {}//É possivel que alguns checkbox não existam caso estejam em outras paginas da tabela
        });
    }

    function selectAllClientsCheckbox(sel) {
        $('#route-client-add-table input[type=""checkbox""]').each(function (i, e) {
            if ($(e).attr('disabled') == 'disabled') return;
            e.checked = sel.checked;
        });
    }
");
            }
            );
            __Web_Utils_TagHelperScriptCut = CreateTagHelper<global::Web.Utils.TagHelperScriptCut>();
            __tagHelperExecutionContext.Add(__Web_Utils_TagHelperScriptCut);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_0);
            __Web_Utils_TagHelperScriptCut.CutKey = (string)__tagHelperAttribute_1.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_1);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public Services.Route.RouteServices routeServices { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public Web.Helpers.DropDownListHelper dropDownListHelper { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; }
    }
}
#pragma warning restore 1591
