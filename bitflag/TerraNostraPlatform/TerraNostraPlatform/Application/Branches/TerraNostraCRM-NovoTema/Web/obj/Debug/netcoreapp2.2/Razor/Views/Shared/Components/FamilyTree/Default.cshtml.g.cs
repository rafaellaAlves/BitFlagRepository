#pragma checksum "C:\repositorios\bitflag\Nova pasta\TerraNostraPlatform\Application\Branches\TerraNostraCRM-NovoTema\Web\Views\Shared\Components\FamilyTree\Default.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "66b220cdb9f2a3df575d7cdb2a3585483536b66b"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Shared_Components_FamilyTree_Default), @"mvc.1.0.view", @"/Views/Shared/Components/FamilyTree/Default.cshtml")]
[assembly:global::Microsoft.AspNetCore.Mvc.Razor.Compilation.RazorViewAttribute(@"/Views/Shared/Components/FamilyTree/Default.cshtml", typeof(AspNetCore.Views_Shared_Components_FamilyTree_Default))]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#line 1 "C:\repositorios\bitflag\Nova pasta\TerraNostraPlatform\Application\Branches\TerraNostraCRM-NovoTema\Web\Views\_ViewImports.cshtml"
using Web;

#line default
#line hidden
#line 2 "C:\repositorios\bitflag\Nova pasta\TerraNostraPlatform\Application\Branches\TerraNostraCRM-NovoTema\Web\Views\_ViewImports.cshtml"
using DTO;

#line default
#line hidden
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"66b220cdb9f2a3df575d7cdb2a3585483536b66b", @"/Views/Shared/Components/FamilyTree/Default.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"67bc2528675d6df6a8850aaaa1a29809989fa4e2", @"/Views/_ViewImports.cshtml")]
    public class Views_Shared_Components_FamilyTree_Default : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<int>
    {
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_0 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("value", "0", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_1 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("data-title", new global::Microsoft.AspNetCore.Html.HtmlString("Pai"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_2 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("data-title", new global::Microsoft.AspNetCore.Html.HtmlString("Mãe"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_3 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("value", "1", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_4 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("data-title", new global::Microsoft.AspNetCore.Html.HtmlString("Filho"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_5 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("data-title", new global::Microsoft.AspNetCore.Html.HtmlString("Filha"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_6 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("value", "2", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_7 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("data-title", new global::Microsoft.AspNetCore.Html.HtmlString("Marido"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_8 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("data-paret-title", new global::Microsoft.AspNetCore.Html.HtmlString("Pai"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_9 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("data-title", new global::Microsoft.AspNetCore.Html.HtmlString("Esposa"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_10 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("data-paret-title", new global::Microsoft.AspNetCore.Html.HtmlString("Mãe"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_11 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("id", new global::Microsoft.AspNetCore.Html.HtmlString("FamilyTreeForm"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        #line hidden
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.OptionTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            BeginContext(12, 635, true);
            WriteLiteral(@"
<style type=""text/css"">
    .card-body {
        width: 100%;
        height: 500px !important;
    }

    .node-item {
        position: absolute;
        height: 50px;
        width: 100px;
        border: 1px solid black;
        border-radius: 3px;
        background-color: grey;
        color: white;
        font-size: 12px;
        text-align: center;
        line-height: 50px;
    }

    #tree {
        width: 100%;
        height: 500px !important;
    }
</style>
<div class=""card"">
    <div class=""card-header"">
        <div class=""row"">
            <div class=""col-md-12"">
                <a");
            EndContext();
            BeginWriteAttribute("href", " href=\"", 647, "\"", 684, 1);
#line 31 "C:\repositorios\bitflag\Nova pasta\TerraNostraPlatform\Application\Branches\TerraNostraCRM-NovoTema\Web\Views\Shared\Components\FamilyTree\Default.cshtml"
WriteAttributeValue("", 654, Url.Action("Index", "Client"), 654, 30, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(685, 3925, true);
            WriteLiteral(@" class=""btn btn-secondary""><i class=""simple-icon-arrow-left""></i> Voltar</a>
                <button type=""button"" class=""btn btn-primary float-right"" id=""zoom-out-button""><i class=""fa fa-search-minus"" style=""font-size: 20px;""></i></button>
                <button type=""button"" class=""btn btn-primary float-right mr-2"" id=""zoom-in-button""><i class=""fa fa-search-plus"" style=""font-size: 20px;""></i></button>
            </div>
        </div>
    </div>
    <div class=""card-body"">
        <div class=""row"">
            <div class=""col-md-12"">
                <div id=""tree""></div>
            </div>
        </div>
    </div>
</div>

<script type=""text/javascript"">
    var chart, lastItemAdded, data = [];
    var familyGroupTag = {
        group: true,
        template: ""group_grey"",
        groupState: OrgChart.EXPAND
    };
    OrgChart.templates.clientTemplate = Object.assign({}, OrgChart.templates.polina);

    OrgChart.templates.clientTemplate.node = '<rect x=""0"" y=""0"" height=""80"" width=""");
            WriteLiteral(@"300"" fill=""#fac751"" stroke-width=""1"" stroke=""#686868"" rx=""40"" ry=""40""></rect>';
    OrgChart.templates.clientTemplate.field_0 = '<text width=""210"" class=""field_0"" style=""font-size: 18px;"" fill=""#303030"" x=""50"" y=""30"" text-anchor=""start"">{val}</text>';
    OrgChart.templates.clientTemplate.field_1 = '<text width=""210"" class=""field_1"" style=""font-size: 14px;"" fill=""#303030"" x=""50"" y=""55"" text-anchor=""start"">{val}</text>';
    OrgChart.templates.clientTemplate.nodeMenuButton = '<g style=""cursor:pointer;"" transform=""matrix(1,0,0,1,285,33)"" control-node-menu-id=""{id}""><rect x=""-4"" y=""-10"" fill=""#000000"" fill-opacity=""0"" width=""22"" height=""22""></rect><circle cx=""0"" cy=""0"" r=""2"" fill=""#000000""></circle><circle cx=""0"" cy=""7"" r=""2"" fill=""#000000""></circle><circle cx=""0"" cy=""14"" r=""2"" fill=""#000000""></circle></g>';

    OrgChart.templates.polina.node = '<rect x=""0"" y=""0"" height=""80"" width=""300"" fill=""#4c7cf3"" stroke-width=""1"" stroke=""#686868"" rx=""40"" ry=""40""></rect>';

        function addForm(node) {
         ");
            WriteLiteral(@"   var d = GetNodeData(node);

            $('.text-danger').remove();

            $('#positionArea').show();
            $('#selectedNode').val(d.id);
            $('#FamilyTreeId').val('');
            $('#Name').val('');
            $('#Title').val('Pai');
            $('#Position').val(0);

            $('#CreateOrUpdateModal').modal('show');
            $('#CreateOrUpdateModalTitle').text('Novo Registro em ' + d.name);
        };
        function editForm(node) {
            var d = GetNodeData(node);
            if (d.isClient) {
                alert('Não é possível editar o próprio cliente.');
                return;
            }

            $('.text-danger').remove();

            $('#positionArea').hide();
            $('#selectedNode').val('');
            $('#FamilyTreeId').val(d.id);
            $('#Name').val(d.name);
            $('#Title').val(d.title);

            $('#CreateOrUpdateModal').modal('show');
            $('#CreateOrUpdateModalTitle').text('Regist");
            WriteLiteral(@"ro - ' + d.name);
        };
        function removeItem(node) {
            var d = GetNodeData(node);
            console.log(d);
            if (d.isClient) {
                alert('Não é possível excluir o próprio cliente.');
                return;
            }
            var childs = GetNodeDataByParentId(node);
            if (childs.length > 0 && d.pid != null) {
                var hasClient = false;
                for (var i = 0; i < childs.length; i++) {
                    if (childs[i].isClient) hasClient = true;
                }

                if (!hasClient || d.pid != null) {
                    alert('Delete os filhos ou os pais primeiros.');
                    return;
                }
            }

            if (!confirm('Deseja realmente excluir este item?')) return;

            $.post('");
            EndContext();
            BeginContext(4611, 30, false);
#line 117 "C:\repositorios\bitflag\Nova pasta\TerraNostraPlatform\Application\Branches\TerraNostraCRM-NovoTema\Web\Views\Shared\Components\FamilyTree\Default.cshtml"
               Write(Url.Action("DeleteFamilyTree"));

#line default
#line hidden
            EndContext();
            BeginContext(4641, 1126, true);
            WriteLiteral(@"', { familyTreeId: d.id }, function (_d) {
                alert(_d.message);
                if (!_d.hasError) {
                    window.location.reload();
                    //$.each(GetNodeDataByParentId(d.id), function (i, e) {
                    //    var index = GetNodeIndex(e.id);
                    //    data[index].pid = null;
                    //    data[index].parentId = null;

                    //    chart.update(data[index]);
                    //});
                    //var marriedWith = MarriedWith(node);
                    //if (marriedWith != null && marriedWith.pid == null && marriedWith.secondParentId == null &&
                    //    GetNodeDataByParentId(marriedWith.id).length == 0 && GetNodeDataBySecondParentId(marriedWith.id).length == 0) {
                    //    chart.remove(marriedWith.id);
                    //}

                    //chart.remove(node);
                    ////chart.removeNode(node);
                    //chart.draw();
       ");
            WriteLiteral("         }\r\n            });\r\n        };\r\n\r\n        $(window).ready(function () {\r\n            $.post(\"");
            EndContext();
            BeginContext(5768, 27, false);
#line 142 "C:\repositorios\bitflag\Nova pasta\TerraNostraPlatform\Application\Branches\TerraNostraCRM-NovoTema\Web\Views\Shared\Components\FamilyTree\Default.cshtml"
               Write(Url.Action("GetFamilyTree"));

#line default
#line hidden
            EndContext();
            BeginContext(5795, 15, true);
            WriteLiteral("\", {clientId: \'");
            EndContext();
            BeginContext(5811, 5, false);
#line 142 "C:\repositorios\bitflag\Nova pasta\TerraNostraPlatform\Application\Branches\TerraNostraCRM-NovoTema\Web\Views\Shared\Components\FamilyTree\Default.cshtml"
                                                          Write(Model);

#line default
#line hidden
            EndContext();
            BeginContext(5816, 2803, true);
            WriteLiteral(@"'}, function (d) {
                console.log(d);
                data = d.nodes;
                chart = new OrgChart(document.getElementById(""tree""), {
                    enableSearch: false,
                    searchFields: [""name"", ""title""],
                    nodeMouseClick: OrgChart.action.none,
                    mouseScrool: OrgChart.action.none,
                    //showXScroll: BALKANGraph.scroll.visible,
                    //showYScroll: BALKANGraph.scroll.visible,
                    template: ""polina"",
                    nodeMenu: {
                        edit: {
                            text: ""Editar"",
                            onClick: editForm
                        },
                        add: {
                            text: ""Adicionar"",
                            onClick: addForm
                        },
                        remove: {
                            text: ""Remover"",
                            onClick: removeItem
               ");
            WriteLiteral(@"         }
                    },
                    nodeBinding: {
                        field_0: ""name"",
                        field_1: ""title"",
                    },
                    tags: d.tags,
                    nodes: d.nodes,
                    onRedraw: function (sender) {
                        $('div[data-id=""search""]').find('input').attr('placeholder', 'Pesquisar...');

                        if (lastItemAdded != null) {
                            var d = lastItemAdded;
                            if (d.marriedWith != null) {
                                chart.group(d.marriedWith, d.id);
                            } else if ($('#Position').val() == 0) {
                                chart.linkNode($('#selectedNode').val(), d.id);
                            } else if ($('#Position').val() == 1) {
                                chart.linkNode(d.id, $('#selectedNode').val());
                            }
                            chart.draw();
          ");
            WriteLiteral(@"                  lastItemAdded = null;
                        }
                    },
                });
            });
        });
</script>

<div class=""modal fade"" id=""CreateOrUpdateModal"" tabindex=""-1"" role=""dialog"" aria-labelledby=""CreateOrUpdateModalTitle"" aria-hidden=""true"">
    <div class=""modal-dialog"" role=""document"">
        <div class=""modal-content"">
            <div class=""modal-header"">
                <h5 class=""modal-title"" id=""CreateOrUpdateModalTitle""></h5>
                <button type=""button"" class=""close"" data-dismiss=""modal"" aria-label=""Close"">
                    <span aria-hidden=""true"">&times;</span>
                </button>
            </div>
            <div class=""modal-body"">
                ");
            EndContext();
            BeginContext(8619, 1662, false);
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("form", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "66b220cdb9f2a3df575d7cdb2a3585483536b66b18486", async() => {
                BeginContext(8645, 238, true);
                WriteLiteral("\r\n                    <input type=\"hidden\" id=\"selectedNode\" name=\"selectedNode\" />\r\n                    <input type=\"hidden\" id=\"FamilyTreeId\" name=\"FamilyTreeId\" />\r\n                    <input type=\"hidden\" id=\"ClientId\" name=\"ClientId\"");
                EndContext();
                BeginWriteAttribute("value", " value=\"", 8883, "\"", 8897, 1);
#line 207 "C:\repositorios\bitflag\Nova pasta\TerraNostraPlatform\Application\Branches\TerraNostraCRM-NovoTema\Web\Views\Shared\Components\FamilyTree\Default.cshtml"
WriteAttributeValue("", 8891, Model, 8891, 6, false);

#line default
#line hidden
                EndWriteAttribute();
                BeginContext(8898, 741, true);
                WriteLiteral(@" />
                    <div class=""row"" id=""name-and-title-area"">
                        <div class=""col-md-12"">
                            <label>Nome:</label>
                            <input class=""form-control"" id=""Name"" name=""Name"" placeholder=""Nome"" />
                        </div>
                        <input type=""hidden"" class=""form-control"" id=""Title"" name=""Title"" value=""Pai"" placeholder=""Título"" />
                    </div>
                    <div class=""row mt-3"">
                        <div class=""col-md-12"" id=""positionArea"">
                            <label>Posição:</label>
                            <select class=""form-control"" id=""Position"" name=""Position"">
                                ");
                EndContext();
                BeginContext(9639, 47, false);
                __tagHelperExecutionContext = __tagHelperScopeManager.Begin("option", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "66b220cdb9f2a3df575d7cdb2a3585483536b66b20396", async() => {
                    BeginContext(9674, 3, true);
                    WriteLiteral("Pai");
                    EndContext();
                }
                );
                __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.OptionTagHelper>();
                __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper);
                __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper.Value = (string)__tagHelperAttribute_0.Value;
                __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_0);
                __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_1);
                await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
                if (!__tagHelperExecutionContext.Output.IsContentModified)
                {
                    await __tagHelperExecutionContext.SetOutputContentAsync();
                }
                Write(__tagHelperExecutionContext.Output);
                __tagHelperExecutionContext = __tagHelperScopeManager.End();
                EndContext();
                BeginContext(9686, 34, true);
                WriteLiteral("\r\n                                ");
                EndContext();
                BeginContext(9720, 47, false);
                __tagHelperExecutionContext = __tagHelperScopeManager.Begin("option", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "66b220cdb9f2a3df575d7cdb2a3585483536b66b21978", async() => {
                    BeginContext(9755, 3, true);
                    WriteLiteral("Mãe");
                    EndContext();
                }
                );
                __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.OptionTagHelper>();
                __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper);
                __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper.Value = (string)__tagHelperAttribute_0.Value;
                __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_0);
                __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_2);
                await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
                if (!__tagHelperExecutionContext.Output.IsContentModified)
                {
                    await __tagHelperExecutionContext.SetOutputContentAsync();
                }
                Write(__tagHelperExecutionContext.Output);
                __tagHelperExecutionContext = __tagHelperScopeManager.End();
                EndContext();
                BeginContext(9767, 34, true);
                WriteLiteral("\r\n                                ");
                EndContext();
                BeginContext(9801, 51, false);
                __tagHelperExecutionContext = __tagHelperScopeManager.Begin("option", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "66b220cdb9f2a3df575d7cdb2a3585483536b66b23560", async() => {
                    BeginContext(9838, 5, true);
                    WriteLiteral("Filho");
                    EndContext();
                }
                );
                __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.OptionTagHelper>();
                __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper);
                __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper.Value = (string)__tagHelperAttribute_3.Value;
                __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_3);
                __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_4);
                await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
                if (!__tagHelperExecutionContext.Output.IsContentModified)
                {
                    await __tagHelperExecutionContext.SetOutputContentAsync();
                }
                Write(__tagHelperExecutionContext.Output);
                __tagHelperExecutionContext = __tagHelperScopeManager.End();
                EndContext();
                BeginContext(9852, 34, true);
                WriteLiteral("\r\n                                ");
                EndContext();
                BeginContext(9886, 51, false);
                __tagHelperExecutionContext = __tagHelperScopeManager.Begin("option", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "66b220cdb9f2a3df575d7cdb2a3585483536b66b25144", async() => {
                    BeginContext(9923, 5, true);
                    WriteLiteral("Filha");
                    EndContext();
                }
                );
                __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.OptionTagHelper>();
                __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper);
                __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper.Value = (string)__tagHelperAttribute_3.Value;
                __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_3);
                __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_5);
                await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
                if (!__tagHelperExecutionContext.Output.IsContentModified)
                {
                    await __tagHelperExecutionContext.SetOutputContentAsync();
                }
                Write(__tagHelperExecutionContext.Output);
                __tagHelperExecutionContext = __tagHelperScopeManager.End();
                EndContext();
                BeginContext(9937, 34, true);
                WriteLiteral("\r\n                                ");
                EndContext();
                BeginContext(9971, 76, false);
                __tagHelperExecutionContext = __tagHelperScopeManager.Begin("option", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "66b220cdb9f2a3df575d7cdb2a3585483536b66b26728", async() => {
                    BeginContext(10032, 6, true);
                    WriteLiteral("Marido");
                    EndContext();
                }
                );
                __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.OptionTagHelper>();
                __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper);
                __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper.Value = (string)__tagHelperAttribute_6.Value;
                __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_6);
                __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_7);
                __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_8);
                await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
                if (!__tagHelperExecutionContext.Output.IsContentModified)
                {
                    await __tagHelperExecutionContext.SetOutputContentAsync();
                }
                Write(__tagHelperExecutionContext.Output);
                __tagHelperExecutionContext = __tagHelperScopeManager.End();
                EndContext();
                BeginContext(10047, 34, true);
                WriteLiteral("\r\n                                ");
                EndContext();
                BeginContext(10081, 76, false);
                __tagHelperExecutionContext = __tagHelperScopeManager.Begin("option", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "66b220cdb9f2a3df575d7cdb2a3585483536b66b28403", async() => {
                    BeginContext(10142, 6, true);
                    WriteLiteral("Esposa");
                    EndContext();
                }
                );
                __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.OptionTagHelper>();
                __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper);
                __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper.Value = (string)__tagHelperAttribute_6.Value;
                __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_6);
                __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_9);
                __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_10);
                await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
                if (!__tagHelperExecutionContext.Output.IsContentModified)
                {
                    await __tagHelperExecutionContext.SetOutputContentAsync();
                }
                Write(__tagHelperExecutionContext.Output);
                __tagHelperExecutionContext = __tagHelperScopeManager.End();
                EndContext();
                BeginContext(10157, 117, true);
                WriteLiteral("\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                ");
                EndContext();
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_11);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            EndContext();
            BeginContext(10281, 4090, true);
            WriteLiteral(@"
            </div>
            <div class=""modal-footer"">
                <div class=""row"" style=""width: 100%; margin: 0;"">
                    <div class=""col-md-6"">
                        <button type=""button"" class=""btn btn-secondary"" data-dismiss=""modal""><i class=""fa fa-times""></i>&nbsp;Fechar</button>
                    </div>
                    <div class=""col-md-6"">
                        <button type=""button"" id=""FamilyTreeButton"" class=""btn btn-primary float-right""><i class=""fa fa-cloud-download""></i>&nbsp;Salvar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script type=""text/javascript"">

        $('#Position').change(function () {
            $('#Title').val($('#Position option:selected').data('title'));
        });

        $('#FamilyTreeButton').click(function () {
            if (Validar()) {
                SaveFamilyTree();
            }
        });

        function Validar() {

            v");
            WriteLiteral(@"ar hasError = false;
            $('.text-danger').remove();

            if (IsNullOrWhiteSpace($('#Name').val())) {
                $('#Name').after($('<div>', { class: 'text-danger' }).append('Preencha o Nome'));
                hasError = true;
            }

            //if (IsNullOrWhiteSpace($('#Title').val())) {
            //    $('#Title').after($('<div>', { class: 'text-danger' }).append('Preencha o Título.'));
            //    hasError = true;
            //}

            if (!IsNullOrWhiteSpace($('#selectedNode').val())) {
                var n = GetNodeData($('#selectedNode').val());
                var marriedWith = MarriedWith(n.id);
                marriedWith = marriedWith == null ? n.marriedWith == null ? null : GetNodeData(n.marriedWith) : marriedWith;
                if ((n.marriedWith != null || marriedWith != null) && $('#Position').val() == 2) {
                    $('#Position').after($('<div>', { class: 'text-danger' }).append('Esta pessoa já esta casada.'));
   ");
            WriteLiteral(@"                 hasError = true;
                }

                if ($('#Position').val() == 0 &&
                    (
                        (n.pid != null && (MarriedWith(n.pid) != null || GetNodeData(n.pid).marriedWith != null)) || //possui dois pais
                        (marriedWith != null && marriedWith.pid != null && (MarriedWith(marriedWith.pid) != null || GetNodeData(marriedWith.pid).marriedWith != null)) // marido/esposa possui dois pais
                    )) {
                    $('#Position').after($('<div>', { class: 'text-danger' }).append('Esta pessoa já possuí dois pais.'));
                    hasError = true;
                }
            }

            return !hasError;
        }

        function GetLastParent(node) {
            var d = GetNodeData(node);
            if (d.pid != null) {
                return GetLastParent(d.pid);
            }
            return d;
        }

        function CountChildrens(node, count) {

            if (GetNodeData");
            WriteLiteral(@"BySecondParentId(node).length > 0) {
                return CountChildrens(GetNodeDataBySecondParentId(node)[0].id, ++count);
            }
            if (chart.nodes[node].childrenIds.length > 0) {
                return CountChildrens(chart.nodes[node].childrenIds[0], ++count);
            }

            return count;
        }



        function SaveFamilyTree() {
            if (!IsNullOrWhiteSpace($('#selectedNode').val())) {
                var d = GetNodeData($('#selectedNode').val());
                var marriedWith = null;
                if (d.marriedWith != null) marriedWith = GetNodeData(d.marriedWith);

                if ($('#Position').val() == 0 && marriedWith != null) // caso esteja criando novo pai/mãe e possui marido/esposa, os pais serão criados no nome do marido/esposa
                {
                    $('#selectedNode').val(marriedWith.id);
                }
            }
            var d = $('#FamilyTreeForm').serializeArray();

            $.post('");
            EndContext();
            BeginContext(14372, 28, false);
#line 328 "C:\repositorios\bitflag\Nova pasta\TerraNostraPlatform\Application\Branches\TerraNostraCRM-NovoTema\Web\Views\Shared\Components\FamilyTree\Default.cshtml"
               Write(Url.Action("SaveFamilyTree"));

#line default
#line hidden
            EndContext();
            BeginContext(14400, 2748, true);
            WriteLiteral(@"', d, function (d) {
                alert(d.message);
                if (!d.hasError) {
                    //window.location.reload();
                    CreateOrUpdateNode(d.data);
                }

                $('#CreateOrUpdateModal').modal('hide');
            });
        }

        function GetNodeData(id) {
            var index;
            for (var i = 0; i < data.length; i++) {
                if (data[i].id == id) {
                    return data[i];
                }
            }
        }
        function GetClientIndex() {
            for (var i = 0; i < data.length; i++) {
                if (data[i].isClient == true) {
                    return i;
                }
            }
        }
        function GetClientid() {
            for (var i = 0; i < data.length; i++) {
                if (data[i].isClient == true) {
                    return data[i].id;
                }
            }
        }
        function GetNodeDataByParentId(id) {
      ");
            WriteLiteral(@"      var d = [];
            for (var i = 0; i < data.length; i++) {
                if (data[i].pid == id) {
                    d.push(data[i]);
                }
            }
            return d;
        }
        function GetNodeDataBySecondParentId(id) {
            var d = [];
            for (var i = 0; i < data.length; i++) {
                if (data[i].secondParentId == id) {
                    d.push(data[i]);
                }
            }
            return d;
        }
        function MarriedWith(id) {
            for (var i = 0; i < data.length; i++) {
                if (data[i].marriedWith == id) {
                    return data[i];
                }
            }
        }

        function CreateOrUpdateNode(d) {
            var index = GetNodeIndex(d.id);

            if (index == null) {
                lastItemAdded = d;

                if (d.marriedWith != null) {
                    chart.addTag(d.marriedWith, familyGroupTag);
                }
");
            WriteLiteral(@"                chart.add(d);
                chart.draw();
            } else {
                data[index] = d;
                chart.updateNode(d);
            }
        }

        function GetNodeIndex(id) {
            var index = null;
            for (var i = 0; i < data.length; i++) {
                if (data[i].id == id) {
                    index = i;
                    break;
                }
            }
            return index;
        }

        $('#zoom-in-button').click(function(){
            chart.zoom(1.3, [50, 50]);
        });

        $('#zoom-out-button').click(function () {
            chart.zoom(0.7, [50, 50]);
        });
</script>

");
            EndContext();
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<int> Html { get; private set; }
    }
}
#pragma warning restore 1591
